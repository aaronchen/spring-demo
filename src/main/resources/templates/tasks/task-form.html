<!-- Shared form fields fragment â€” included by task.html (full page) and task-modal.html (HTMX modal).
     th:object must be set on the enclosing <form> in the including template. -->
<th:block th:fragment="fields" xmlns:th="http://www.thymeleaf.org">

    <!-- Title Field -->
    <div class="mb-3">
        <label for="title" class="form-label fw-bold">
            Title <span class="text-danger">*</span>
        </label>
        <input type="text"
               th:field="*{title}"
               class="form-control"
               th:classappend="${#fields.hasErrors('title')} ? 'is-invalid' : ''"
               placeholder="Enter task title">
        <div class="invalid-feedback" th:if="${#fields.hasErrors('title')}" th:errors="*{title}">
            Title error
        </div>
    </div>

    <!-- Description Field -->
    <div class="mb-3">
        <label for="description" class="form-label fw-bold">Description</label>
        <textarea th:field="*{description}"
                  class="form-control"
                  th:classappend="${#fields.hasErrors('description')} ? 'is-invalid' : ''"
                  rows="4"
                  placeholder="Enter task description (optional)"></textarea>
        <div class="invalid-feedback" th:if="${#fields.hasErrors('description')}" th:errors="*{description}">
            Description error
        </div>
    </div>

    <!-- Completed Checkbox (Edit Mode Only) -->
    <div th:if="${isEdit}">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="completed" th:field="*{completed}">
            <label class="form-check-label" for="completed">
                <strong>Mark as completed</strong>
            </label>
        </div>
    </div>

</th:block>
